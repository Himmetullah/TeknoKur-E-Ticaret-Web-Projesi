@{
	ViewData["Title"] = "Admin Panel";
	Layout = "~/Views/Shared/_AdminLayout.cshtml";

}

<div class="container-xxl flex-grow-1 container-p-y">
	<div class="row g-4">

		<!-- Toplam Sipariş -->
		<div class="col-xxl-3 col-sm-6">
			<div class="card h-100">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
						<div class="avatar">
							<div class="avatar-initial bg-label-primary rounded-3">
								<i class="ri-shopping-cart-2-line ri-24px"></i>
							</div>
						</div>
						<div class="d-flex align-items-center">
							<p class="mb-0 text-success me-1">+22%</p>
							<i class="ri-arrow-up-s-line text-success"></i>
						</div>
					</div>
					<div class="card-info mt-4">
						<h5 class="mb-1">@ViewBag.ToplamSiparis</h5>
						<p class="mb-0">Toplam Sipariş</p>
						<div class="badge bg-label-secondary rounded-pill">Son 4 Ay</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Toplam Üye -->
		<div class="col-xxl-3 col-sm-6">
			<div class="card h-100">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
						<div class="avatar">
							<div class="avatar-initial bg-label-info rounded-3">
								<i class="ri-user-3-line ri-24px"></i>
							</div>
						</div>
						<div class="d-flex align-items-center">
							<p class="mb-0 text-success me-1">+10%</p>
							<i class="ri-arrow-up-s-line text-success"></i>
						</div>
					</div>
					<div class="card-info mt-4">
						<h5 class="mb-1">@ViewBag.ToplamUye</h5>
						<p class="mb-0">Toplam Üye</p>
						<div class="badge bg-label-secondary rounded-pill">Son 4 Ay</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<!-- Son Siparişler Tablosu -->
	<div class="row mt-5">
		<div class="col-12">
			<div class="card">
				<div class="card-header">
					<h5 class="card-title mb-0">Son Siparişler</h5>
				</div>
				<div class="table-responsive text-nowrap">
					<table class="table table-hover">
						<thead class="table-light">
							<tr>
								<th>Sipariş No</th>
								<th>Üye</th>
								<th>Tarih</th>
								<th>Toplam Tutar</th>
								<th>Ödeme Durum</th>
							</tr>
						</thead>
						<tbody class="table-border-bottom-0">
							@foreach (var siparis in (List<Layer.Data.TblSiparis>)ViewBag.SonSiparisler)
							{
								<tr>
									<td>@siparis.SiparisId</td>
									<td>@(siparis.TblUye?.TblUyeKisi?.FirstOrDefault()?.KisiAd) @(siparis.TblUye?.TblUyeKisi?.FirstOrDefault()?.KisiSoyad)</td>
									<td>@siparis.SiparisTarihi.ToString("dd.MM.yyyy")</td>
									<td>@siparis.ToplamTutar ₺</td>
									<td><span class="badge bg-label-primary">@siparis.OdemeDurumu</span></td>
								</tr>
							}
							@if (((List<Layer.Data.TblSiparis>)ViewBag.SonSiparisler).Count == 0)
							{
								<tr>
									<td colspan="5" class="text-center">Hiç sipariş bulunamadı.</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
